<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 

</head>
<body>

<h3>请在下面的输入框中键入字母（A - Z）：</h3>
<form action=""> 
姓氏：<input type="text" id="uName" />
</form>
<p>建议：<span id="userNameTip"></span></p> 

</body>
</html>
<script src="eg.lib.js"></script>
<script type="text/javascript">
(function(){//避免全局污染,将操作放在闭包里
	var delayAjax = function(target){
		eg.AJAX({TYPE:"GET",//AJAX请求类型
			URL:"showhint.php?q="+target.value,//AJAX请求的URL，该文件只有“hello ajax”字符串的纯文本
			ISASYN:true//是否异步
		},function(data){//定义AJAX请求成功后的callback回调函数
			eg.$("userNameTip").innerHTML = data;
		});
	};
	
	var user = eg.$("uName");//取得username的DOM对象，eg.$方法定义在eg.lib.js，详见第2章范例
	var delay; //存储延时程序
	//给userName对象绑定一个onkeyup事件，eg.addListener方法定义在eg.lib.js，详见第2章范例
	eg.addListener(user,"keyup",function(){
		clearTimeout(delay);
		if(user.value !=''){
			delay = setTimeout(delayAjax(user),500);
		}
		else{ eg.$("userNameTip").innerHTML='';}
	});
	
})();
</script>